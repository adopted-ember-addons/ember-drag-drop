{"version":3,"file":"drag-drop.js","sources":["../../../src/test-support/helpers/drag-drop.js"],"sourcesContent":["/* eslint-disable import/extensions, prettier/prettier */\nimport {find, triggerEvent} from '@ember/test-helpers';\nimport MockEvent from './mock-event';\n\nasync function dragOver(dropSelector, moves) {\n  moves = moves || [[{ clientX: 1, clientY: 1 }, dropSelector]];\n  \n  for (const move of moves) {\n    const position = move[0] || false;\n    const selector = move[1] || false;\n    const event = new MockEvent(position);\n    await triggerEvent(selector || dropSelector, 'dragover', event);\n  }\n}\n\nasync function drop(dragElement, dragEvent, options) {\n  let { drop: dropSelector, dropEndOptions, dragOverMoves } = options;\n\n  let dropElement = await find(dropSelector);\n  if (!dropElement) {\n    throw(`There are no drop targets by the given selector: '${dropSelector}'`);\n  }\n\n  await dragOver(dropSelector, dragOverMoves);\n\n  if (options.beforeDrop) {\n    await options.beforeDrop.call();\n  }\n\n  let event = new MockEvent().useDataTransferData(dragEvent);\n  await triggerEvent(dropSelector, 'drop', event);\n\n  return await triggerEvent(dragElement, 'dragend', dropEndOptions);\n}\n\nexport async function drag(dragSelector, options = {}) {\n  let dragEvent = new MockEvent(options.dragStartOptions);\n  const dragElement = document.querySelector(dragSelector);\n\n  await triggerEvent(dragSelector, 'mouseover');\n\n  await triggerEvent(dragSelector, 'dragstart', dragEvent);\n\n  if (options.afterDrag) {\n    await options.afterDrag.call();\n  }\n\n  if (options.drop) {\n    await drop(dragElement, dragEvent, options);\n  }\n}"],"names":["dragOver","dropSelector","moves","clientX","clientY","move","position","selector","event","MockEvent","triggerEvent","drop","dragElement","dragEvent","options","dropEndOptions","dragOverMoves","dropElement","find","beforeDrop","call","useDataTransferData","drag","dragSelector","dragStartOptions","document","querySelector","afterDrag"],"mappings":";;;AAAA;AAIA,eAAeA,QAAQA,CAACC,YAAY,EAAEC,KAAK,EAAE;AAC3CA,EAAAA,KAAK,GAAGA,KAAK,IAAI,CAAC,CAAC;AAAEC,IAAAA,OAAO,EAAE,CAAC;AAAEC,IAAAA,OAAO,EAAE,CAAA;GAAG,EAAEH,YAAY,CAAC,CAAC,CAAA;AAE7D,EAAA,KAAK,MAAMI,IAAI,IAAIH,KAAK,EAAE;AACxB,IAAA,MAAMI,QAAQ,GAAGD,IAAI,CAAC,CAAC,CAAC,IAAI,KAAK,CAAA;AACjC,IAAA,MAAME,QAAQ,GAAGF,IAAI,CAAC,CAAC,CAAC,IAAI,KAAK,CAAA;AACjC,IAAA,MAAMG,KAAK,GAAG,IAAIC,SAAS,CAACH,QAAQ,CAAC,CAAA;IACrC,MAAMI,YAAY,CAACH,QAAQ,IAAIN,YAAY,EAAE,UAAU,EAAEO,KAAK,CAAC,CAAA;AACjE,GAAA;AACF,CAAA;AAEA,eAAeG,IAAIA,CAACC,WAAW,EAAEC,SAAS,EAAEC,OAAO,EAAE;EACnD,IAAI;AAAEH,IAAAA,IAAI,EAAEV,YAAY;IAAEc,cAAc;AAAEC,IAAAA,aAAAA;AAAc,GAAC,GAAGF,OAAO,CAAA;AAEnE,EAAA,IAAIG,WAAW,GAAG,MAAMC,IAAI,CAACjB,YAAY,CAAC,CAAA;EAC1C,IAAI,CAACgB,WAAW,EAAE;IAChB,MAAO,CAAA,kDAAA,EAAoDhB,YAAa,CAAE,CAAA,CAAA,CAAA;AAC5E,GAAA;AAEA,EAAA,MAAMD,QAAQ,CAACC,YAAY,EAAEe,aAAa,CAAC,CAAA;EAE3C,IAAIF,OAAO,CAACK,UAAU,EAAE;AACtB,IAAA,MAAML,OAAO,CAACK,UAAU,CAACC,IAAI,EAAE,CAAA;AACjC,GAAA;EAEA,IAAIZ,KAAK,GAAG,IAAIC,SAAS,EAAE,CAACY,mBAAmB,CAACR,SAAS,CAAC,CAAA;AAC1D,EAAA,MAAMH,YAAY,CAACT,YAAY,EAAE,MAAM,EAAEO,KAAK,CAAC,CAAA;EAE/C,OAAO,MAAME,YAAY,CAACE,WAAW,EAAE,SAAS,EAAEG,cAAc,CAAC,CAAA;AACnE,CAAA;AAEO,eAAeO,IAAIA,CAACC,YAAY,EAAET,OAAO,GAAG,EAAE,EAAE;EACrD,IAAID,SAAS,GAAG,IAAIJ,SAAS,CAACK,OAAO,CAACU,gBAAgB,CAAC,CAAA;AACvD,EAAA,MAAMZ,WAAW,GAAGa,QAAQ,CAACC,aAAa,CAACH,YAAY,CAAC,CAAA;AAExD,EAAA,MAAMb,YAAY,CAACa,YAAY,EAAE,WAAW,CAAC,CAAA;AAE7C,EAAA,MAAMb,YAAY,CAACa,YAAY,EAAE,WAAW,EAAEV,SAAS,CAAC,CAAA;EAExD,IAAIC,OAAO,CAACa,SAAS,EAAE;AACrB,IAAA,MAAMb,OAAO,CAACa,SAAS,CAACP,IAAI,EAAE,CAAA;AAChC,GAAA;EAEA,IAAIN,OAAO,CAACH,IAAI,EAAE;AAChB,IAAA,MAAMA,IAAI,CAACC,WAAW,EAAEC,SAAS,EAAEC,OAAO,CAAC,CAAA;AAC7C,GAAA;AACF;;;;"}