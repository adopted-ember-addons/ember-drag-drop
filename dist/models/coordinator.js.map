{"version":3,"file":"coordinator.js","sources":["../../src/models/coordinator.js"],"sourcesContent":["/* eslint-disable ember/no-classic-classes, ember/no-get, import/extensions, prettier/prettier */\nimport EmberObject from '@ember/object';\nimport Evented from '@ember/object/evented';\nimport { computed } from '@ember/object';\nimport ObjHash from './obj-hash';\nimport { unwrapper } from '../utils/proxy-unproxy-objects';\n\nexport default EmberObject.extend(Evented, {\n  objectMap: computed(function() {\n    return ObjHash.create();\n  }),\n\n  getObject: function(id,ops) {\n    ops = ops || {};\n    var payload = this.get('objectMap').getObj(id);\n\n    if (payload.ops.source && !payload.ops.source.isDestroying && !payload.ops.source.isDestroyed) {\n      const action = payload.ops.source['action'];\n      // Support when action is a function\n      if (typeof action === 'function') {\n        action(payload.obj)\n      }\n\n      // Support when action is a string\n      if (typeof action === 'string' && typeof payload.ops.source.target[action] === 'function') {\n        payload.ops.source.target[action](payload.obj);\n      }\n    }\n\n    if (payload.ops.target && !payload.ops.target.isDestroying && !payload.ops.target.isDestroyed) {\n      const action = payload.ops.target['action'];\n      // Support when action is a function\n      if (typeof action === 'function') {\n        action(payload.obj)\n      }\n\n      // Support when action is a string\n      if (typeof action === 'string' && typeof payload.ops.target.source[action] === 'function') {\n        payload.ops.target.source[action](payload.obj);\n      }\n    }\n\n    this.trigger(\"objectMoved\", {obj: unwrapper(payload.obj), source: payload.ops.source, target: ops.target});\n\n    return unwrapper(payload.obj);\n  },\n\n  setObject: function(obj,ops) {\n    ops = ops || {};\n    return this.get('objectMap').add({obj: obj, ops: ops});\n  }\n});\n"],"names":["EmberObject","extend","Evented","objectMap","computed","ObjHash","create","getObject","id","ops","payload","get","getObj","source","isDestroying","isDestroyed","action","obj","target","trigger","unwrapper","setObject","add"],"mappings":";;;;;AAAA;AAOA,kBAAeA,WAAW,CAACC,MAAM,CAACC,OAAO,EAAE;EACzCC,SAAS,EAAEC,QAAQ,CAAC,YAAW;AAC7B,IAAA,OAAOC,OAAO,CAACC,MAAM,EAAE,CAAA;AACzB,GAAC,CAAC;AAEFC,EAAAA,SAAS,EAAE,UAASC,EAAE,EAACC,GAAG,EAAE;AAC1BA,IAAAA,GAAG,GAAGA,GAAG,IAAI,EAAE,CAAA;AACf,IAAA,IAAIC,OAAO,GAAG,IAAI,CAACC,GAAG,CAAC,WAAW,CAAC,CAACC,MAAM,CAACJ,EAAE,CAAC,CAAA;IAE9C,IAAIE,OAAO,CAACD,GAAG,CAACI,MAAM,IAAI,CAACH,OAAO,CAACD,GAAG,CAACI,MAAM,CAACC,YAAY,IAAI,CAACJ,OAAO,CAACD,GAAG,CAACI,MAAM,CAACE,WAAW,EAAE;MAC7F,MAAMC,MAAM,GAAGN,OAAO,CAACD,GAAG,CAACI,MAAM,CAAC,QAAQ,CAAC,CAAA;AAC3C;AACA,MAAA,IAAI,OAAOG,MAAM,KAAK,UAAU,EAAE;AAChCA,QAAAA,MAAM,CAACN,OAAO,CAACO,GAAG,CAAC,CAAA;AACrB,OAAA;;AAEA;AACA,MAAA,IAAI,OAAOD,MAAM,KAAK,QAAQ,IAAI,OAAON,OAAO,CAACD,GAAG,CAACI,MAAM,CAACK,MAAM,CAACF,MAAM,CAAC,KAAK,UAAU,EAAE;AACzFN,QAAAA,OAAO,CAACD,GAAG,CAACI,MAAM,CAACK,MAAM,CAACF,MAAM,CAAC,CAACN,OAAO,CAACO,GAAG,CAAC,CAAA;AAChD,OAAA;AACF,KAAA;IAEA,IAAIP,OAAO,CAACD,GAAG,CAACS,MAAM,IAAI,CAACR,OAAO,CAACD,GAAG,CAACS,MAAM,CAACJ,YAAY,IAAI,CAACJ,OAAO,CAACD,GAAG,CAACS,MAAM,CAACH,WAAW,EAAE;MAC7F,MAAMC,MAAM,GAAGN,OAAO,CAACD,GAAG,CAACS,MAAM,CAAC,QAAQ,CAAC,CAAA;AAC3C;AACA,MAAA,IAAI,OAAOF,MAAM,KAAK,UAAU,EAAE;AAChCA,QAAAA,MAAM,CAACN,OAAO,CAACO,GAAG,CAAC,CAAA;AACrB,OAAA;;AAEA;AACA,MAAA,IAAI,OAAOD,MAAM,KAAK,QAAQ,IAAI,OAAON,OAAO,CAACD,GAAG,CAACS,MAAM,CAACL,MAAM,CAACG,MAAM,CAAC,KAAK,UAAU,EAAE;AACzFN,QAAAA,OAAO,CAACD,GAAG,CAACS,MAAM,CAACL,MAAM,CAACG,MAAM,CAAC,CAACN,OAAO,CAACO,GAAG,CAAC,CAAA;AAChD,OAAA;AACF,KAAA;AAEA,IAAA,IAAI,CAACE,OAAO,CAAC,aAAa,EAAE;AAACF,MAAAA,GAAG,EAAEG,SAAS,CAACV,OAAO,CAACO,GAAG,CAAC;AAAEJ,MAAAA,MAAM,EAAEH,OAAO,CAACD,GAAG,CAACI,MAAM;MAAEK,MAAM,EAAET,GAAG,CAACS,MAAAA;AAAM,KAAC,CAAC,CAAA;AAE1G,IAAA,OAAOE,SAAS,CAACV,OAAO,CAACO,GAAG,CAAC,CAAA;GAC9B;AAEDI,EAAAA,SAAS,EAAE,UAASJ,GAAG,EAACR,GAAG,EAAE;AAC3BA,IAAAA,GAAG,GAAGA,GAAG,IAAI,EAAE,CAAA;IACf,OAAO,IAAI,CAACE,GAAG,CAAC,WAAW,CAAC,CAACW,GAAG,CAAC;AAACL,MAAAA,GAAG,EAAEA,GAAG;AAAER,MAAAA,GAAG,EAAEA,GAAAA;AAAG,KAAC,CAAC,CAAA;AACxD,GAAA;AACF,CAAC,CAAC;;;;"}