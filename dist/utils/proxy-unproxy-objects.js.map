{"version":3,"file":"proxy-unproxy-objects.js","sources":["../../src/utils/proxy-unproxy-objects.js"],"sourcesContent":["/* eslint-disable prettier/prettier */\nimport { isNone } from '@ember/utils';\nimport { guidFor } from '@ember/object/internals';\n\n/**\n * On drag action we need to provide a property `isDraggingObject` to the UI.\n * This utility is used to create a wrapper object around the object passed to the proxy function.\n * We use this wrapper to prevent the `draggable-object` from mutating the original object by appending\n * `isDraggingObject` to the content.\n * \n * This unexpected mutation causes problems when the targeted content is not prepared to handle\n * the additional property, and potentially leaks local state onto an object that likely holds state\n * for the route or application more generally.\n */\n\n/**\n * @access public\n * Returns the passed object wrapped within new object.\n * Used to proxy draggable objects.\n * @param objectToProxy Object to proxy.\n * @returns {Object} Proxy object.\n */\nexport function wrapper(objectToProxy) {\n  // If we do not have any content for the object to proxy, \n  // we do not wish to render that item.\n  if (!isNone(objectToProxy)) {\n    const guidKey = guidFor(objectToProxy);\n    return {\n      [guidKey]: objectToProxy,\n      unwrappingKey: guidKey,\n      id: objectToProxy.id\n    };\n  }\n  return null;\n}\n\n/**\n * @access public\n * Returns the content of the passed object.\n * Used to un-proxy draggable objects.\n * @param objectToUnproxy Object to un-proxy.\n * @returns {Object} Content of the proxy object.\n */\nexport function unwrapper(objectToUnproxy) {\n  if (!isNone(objectToUnproxy)) {\n    return objectToUnproxy[objectToUnproxy.unwrappingKey];\n  }\n  return null;\n}\n"],"names":["wrapper","objectToProxy","isNone","guidKey","guidFor","unwrappingKey","id","unwrapper","objectToUnproxy"],"mappings":";;;AAAA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASA,OAAOA,CAACC,aAAa,EAAE;AACrC;AACA;AACA,EAAA,IAAI,CAACC,MAAM,CAACD,aAAa,CAAC,EAAE;AAC1B,IAAA,MAAME,OAAO,GAAGC,OAAO,CAACH,aAAa,CAAC,CAAA;IACtC,OAAO;MACL,CAACE,OAAO,GAAGF,aAAa;AACxBI,MAAAA,aAAa,EAAEF,OAAO;MACtBG,EAAE,EAAEL,aAAa,CAACK,EAAAA;KACnB,CAAA;AACH,GAAA;AACA,EAAA,OAAO,IAAI,CAAA;AACb,CAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,SAASC,SAASA,CAACC,eAAe,EAAE;AACzC,EAAA,IAAI,CAACN,MAAM,CAACM,eAAe,CAAC,EAAE;AAC5B,IAAA,OAAOA,eAAe,CAACA,eAAe,CAACH,aAAa,CAAC,CAAA;AACvD,GAAA;AACA,EAAA,OAAO,IAAI,CAAA;AACb;;;;"}